<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>计时器</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }

        #timer {
            font-size: 60px;
            margin: 20px;
        }

        button {
            font-size: 18px;
            padding: 6px 12px;
            margin: 5px;
        }

        .controls {
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <h1>计时器</h1>
    <div id="timer">00:00</div>

    <div class="controls">
        <button id="start">开始</button>
        <button id="pause">暂停</button>
        <button id="reset">重置</button>
        <button id="mode">切换模式 (正计时/倒计时)</button>
    </div>

    <div class="controls">
        <span>倒计时时间调整：</span>
        <button id="addMin">+1 分钟</button>
        <button id="subMin">-1 分钟</button>
        <button id="addSec">+10 秒</button>
        <button id="subSec">-10 秒</button>
    </div>

    <script>
        let timer;
        let time = 0;        // 当前秒数
        let isRunning = false;
        let countdownMode = false;  // false = 正计时, true = 倒计时

        const MAX_MIN = 99;
        const MAX_SEC = 99;

        function formatTime(totalSeconds) {
            let minutes = Math.floor(totalSeconds / 60);
            let seconds = totalSeconds % 60;

            if (minutes > MAX_MIN) minutes = MAX_MIN;
            if (seconds > MAX_SEC) seconds = MAX_SEC;

            return String(minutes).padStart(2, '0') + ":" + String(seconds).padStart(2, '0');
        }

        function updateDisplay() {
            document.getElementById("timer").textContent = formatTime(time);
        }

        document.getElementById("start").onclick = function () {
            if (!isRunning) {
                isRunning = true;
                timer = setInterval(() => {
                    if (countdownMode) {
                        if (time > 0) {
                            time--;
                        } else {
                            clearInterval(timer);
                            isRunning = false;
                            alert("倒计时结束！");
                        }
                    } else {
                        time++;
                        // 限制最大显示 99:99
                        if (time >= (MAX_MIN * 60 + MAX_SEC)) {
                            time = MAX_MIN * 60 + MAX_SEC;
                            clearInterval(timer);
                            isRunning = false;
                        }
                    }
                    updateDisplay();
                }, 1000);
            }
        };

        document.getElementById("pause").onclick = function () {
            clearInterval(timer);
            isRunning = false;
        };

        document.getElementById("reset").onclick = function () {
            clearInterval(timer);
            isRunning = false;
            time = countdownMode ? 0 : 0;
            updateDisplay();
        };

        document.getElementById("mode").onclick = function () {
            clearInterval(timer);
            isRunning = false;
            countdownMode = !countdownMode;
            time = 0;
            updateDisplay();
            alert("切换为 " + (countdownMode ? "倒计时" : "正计时") + " 模式");
        };

        // 调整倒计时时间
        function adjustTime(delta) {
            if (!countdownMode) return; // 只有倒计时模式可调整
            time += delta;
            if (time < 0) time = 0;
            if (time > MAX_MIN * 60 + MAX_SEC) time = MAX_MIN * 60 + MAX_SEC;
            updateDisplay();
        }

        document.getElementById("addMin").onclick = () => adjustTime(60);
        document.getElementById("subMin").onclick = () => adjustTime(-60);
        document.getElementById("addSec").onclick = () => adjustTime(10);
        document.getElementById("subSec").onclick = () => adjustTime(-10);

        updateDisplay(); // 初始化显示
    </script>
</body>

</html>